# Hobbly - Платформа для поиска хобби и активностей

## 📋 Содержание
- [О проекте](#о-проекте)
- [Требования проекта](#требования-проекта)
- [Архитектура](#архитектура)
- [Технологический стек](#технологический-стек)
- [Установка и запуск](#установка-и-запуск)
- [Структура проекта](#структура-проекта)
- [Функциональность](#функциональность)
- [API Документация](#api-документация)
- [База данных](#база-данных)
- [Стилизация](#стилизация)
- [Тестирование](#тестирование)
- [План разработки](#план-разработки)

## 📝 О проекте

**Заказчик**: Hobbly Technologies Oy  
**Тип проекта**: Учебный проект разработки ПО

Hobbly Technologies Oy — современная технологическая компания, миссия которой — облегчить повседневную жизнь людей, предоставляя легкий доступ к хобби и возможностям для досуга. Компания стремится повышать благополучие и социальное взаимодействие, предлагая цифровые решения, которые связывают пользователей с поставщиками услуг и развлекательными активностями.

### Цель проекта
Разработать мобильное приложение и панель управления, которые объединяют широкий спектр возможностей для досуга и активностей. Приложение должно позволять пользователям легко находить подходящие варианты и получать достоверную информацию о поставщиках услуг.

### Целевые группы
- Дети
- Подростки
- Взрослые
- Семьи
- Пожилые люди

## 🎯 Требования проекта

### Основные функции приложения

1. **Сбор информации о доступных активностях**
   - Поставщики услуг могут добавлять свои мероприятия в приложение
   - Пользователи могут фильтровать активности по множеству параметров

2. **Фильтры и поиск**
   - Поиск хобби по местоположению, виду активности, цене, времени или целевой группе
   - Возможность использовать несколько фильтров одновременно

3. **Информация о поставщиках услуг**
   - Четкая информация: описание, местоположение, контакты, расписание и цены
   - Ссылки на сайт поставщика или форму регистрации

4. **Удобство использования и доступность**
   - Простое в использовании для всех возрастов
   - Понятный интерфейс с принципами доступности

5. **Панель управления для поставщиков услуг**
   - Спортивные клубы, муниципалитеты, ассоциации и компании могут добавлять, редактировать и удалять свои события
   - Администраторы могут одобрять и контролировать контент

### Подход к разработке
- **Mobile first**: пользовательский интерфейс оптимизирован под мобильные браузеры (375px)
- **Desktop first**: панель управления рассчитана на работу на больших экранах (1440px)

## 🏗 Архитектура

```
┌─────────────────────────────────────────────────┐
│                   Frontend                      │
├──────────────────────┬──────────────────────────┤
│   Mobile Web App     │    Admin Panel           │
│   (Mobile First)     │    (Desktop First)       │
├──────────────────────┴──────────────────────────┤
│              REST API Service Layer             │
│                    (axios)                      │
├──────────────────────────────────────────────────┤
│                  Supabase                       │
│         (PostgreSQL + Auth + Storage)           │
└──────────────────────────────────────────────────┘
```

### Принципы архитектуры
1. **Разделение ответственности**: Четкое разделение между UI, бизнес-логикой и доступом к данным
2. **API-First подход**: Все взаимодействие с бэкендом через REST API
3. **Модульность**: Компоненты и сервисы легко заменяемы
4. **Mobile-first**: Адаптивный дизайн с приоритетом мобильных устройств

## 🛠 Технологический стек

### Frontend
- **React 18.x** - UI библиотека
- **TypeScript** - Типизация и лучшая поддержка IDE
- **React Router v6** - Маршрутизация
- **Axios** - HTTP клиент для REST API
- **CSS Modules** - Изолированные стили

### Backend
- **Supabase** - Backend-as-a-Service
  - PostgreSQL - База данных
  - Auth - Аутентификация
  - Storage - Хранение файлов
  - REST API - Автоматически генерируемый API

## 🚀 Установка и запуск

### Требования
- Node.js >= 16.x
- npm или yarn
- Аккаунт Supabase

### Установка
```bash
# Клонирование репозитория
git clone [repository-url]

# Переход в директорию
cd hobbly-app

# Установка зависимостей
npm install

# Копирование переменных окружения
cp .env.example .env

# Настройка переменных в .env файле
# REACT_APP_SUPABASE_URL=your_supabase_url
# REACT_APP_SUPABASE_ANON_KEY=your_anon_key
```

### Команды разработки
```bash
# Режим разработки
npm start

# Сборка для продакшена
npm run build

# Тесты
npm test

# Тесты с покрытием
npm test -- --coverage
```

## 📁 Структура проекта

```
hobbly-app/
├── assets/
│   └── wireframes/          # Каркасные модели (wireframes)
├── public/
│   ├── index.html
│   └── manifest.json
├── src/
│   ├── api/                 # API слой с Supabase REST клиентами
│   │   ├── config.ts       # Axios клиенты и интерсепторы
│   │   ├── auth.api.ts     # API аутентификации
│   │   └── activities.api.ts # API активностей
│   ├── components/          # Переиспользуемые компоненты
│   │   ├── common/         # Общие компоненты (Button, Input, Table, Icon)
│   │   └── layout/         # Компоненты макета (Header, Sidebar)
│   ├── pages/              # Компоненты страниц
│   │   ├── Welcome/        # Главная страница
│   │   ├── Login/          # Аутентификация
│   │   ├── SignUp/         # Регистрация с многоэтапной формой
│   │   ├── Dashboard/      # Пользовательская панель
│   │   ├── Activities/     # Управление активностями
│   │   └── PersonalInfo/   # Управление профилем
│   ├── types/              # TypeScript интерфейсы и enums
│   ├── styles/             # Глобальные CSS переменные
│   └── App.tsx            # Настройка роутера и основные маршруты
├── .env                    # Переменные окружения
└── package.json
```

## ⚙️ Функциональность

### Панель управления (Desktop First)

#### Основные функции
- ✅ Регистрация пользователей и вход по email и паролю
- ✅ Смена пароля в настройках пользователя
- ✅ Добавление, редактирование и удаление активностей (только свои объявления)
- ✅ Права администратора для управления всеми объявлениями и пользователями
- ✅ Двухэтапное удаление (корзина и окончательное удаление)

#### Регистрация и аутентификация
- Регистрация через поэтапную форму (контактные данные, основные данные, информация об организации)
- Email используется как логин
- Безопасные пароли (минимум 8 символов и одна цифра)
- Безопасное хранение паролей (bcrypt или Argon2)

#### Роли пользователей
- **Пользователи-организаторы** (спортивные клубы, объединения, компании) → видят и управляют только своими объявлениями
- **Администраторы** (сотрудники Hobbly) → могут управлять всеми аккаунтами и объявлениями

### Мобильное приложение (Mobile First)

#### Основные страницы
- **Объявления** (главная): список всех объявлений о хобби и активностях
- **Поиск**: функция поиска по хобби и мероприятиям
- **Карта**: отображение расположения объявлений на карте

#### Функции
- Нижний навигационный бар для удобного перехода между страницами
- Постраничная загрузка (infinite scroll) для списков активностей
- Поиск по заголовку, описанию, названию организации и тегам
- Детальная информация по каждому объявлению с контактными данными

### Типы событий (5 штук)
- Активность
- Мероприятие
- Возможность для хобби
- Клуб
- Соревнование

### Категории (10 штук)
- Спорт и физическая активность
- Музыка и исполнительское искусство
- Ремесла и искусство
- Наука и технологии
- Игры и киберспорт
- Еда и кулинария
- Природа и туризм
- Культура и история
- Сообщество и добровольчество
- Дети и семьи

### Теги (10 примеров)
- Бесплатно
- Открыто для всех
- Подходит для начинающих
- Постоянное событие
- Онлайн
- Подходит для семей
- Подходит для пожилых
- Подходит для особых групп
- Оборудование предоставляется
- Требуется регистрация

## 📡 API Документация

### Переменные окружения
```bash
REACT_APP_SUPABASE_URL=your_supabase_project_url
REACT_APP_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### API Клиенты
- `apiClient` - REST API для операций с данными (`/rest/v1`)
- `authClient` - API аутентификации (`/auth/v1`)
- `storageClient` - API файлового хранилища (`/storage/v1`)

Все клиенты включают автоматическое управление токенами и обработку ошибок.

### Основные эндпоинты

#### Аутентификация
- `POST /auth/v1/signup` - Регистрация
- `POST /auth/v1/token?grant_type=password` - Вход
- `POST /auth/v1/logout` - Выход
- `POST /auth/v1/user` - Обновление профиля

#### Активности
- `GET /rest/v1/activities` - Список активностей
- `POST /rest/v1/activities` - Создание активности
- `PATCH /rest/v1/activities?id=eq.{id}` - Обновление
- `DELETE /rest/v1/activities?id=eq.{id}` - Удаление

## 💾 База данных

### Основные таблицы

#### users (Пользователи)
```sql
- id: UUID (PK)
- email: VARCHAR
- password_hash: VARCHAR
- role: ENUM ('organizer', 'admin', 'user')
- organization_name: VARCHAR
- full_name: VARCHAR
- phone: VARCHAR
- created_at: TIMESTAMP
```

#### activities (Активности)
```sql
- id: UUID (PK)
- title: VARCHAR
- description: TEXT
- short_description: VARCHAR(100)
- type: ENUM (activity_types)
- category_id: UUID (FK)
- location: VARCHAR
- address: VARCHAR
- price: DECIMAL
- currency: VARCHAR
- image_url: VARCHAR
- user_id: UUID (FK)
- start_date: TIMESTAMP
- end_date: TIMESTAMP
- max_participants: INTEGER
- min_age: INTEGER
- max_age: INTEGER
- contact_email: VARCHAR
- contact_phone: VARCHAR
- external_link: VARCHAR
- is_deleted: BOOLEAN
- created_at: TIMESTAMP
```

#### categories (Категории)
```sql
- id: UUID (PK)
- name: VARCHAR
- icon: VARCHAR
- description: TEXT
```

#### tags (Теги)
```sql
- id: UUID (PK)
- name: VARCHAR
- color: VARCHAR
```

#### activity_tags (Связь активностей и тегов)
```sql
- activity_id: UUID (FK)
- tag_id: UUID (FK)
```

## 🎨 Стилизация

### Цветовая палитра
#### Основные цвета
- **Primary**: `#667eea` - Основной фиолетовый
- **Secondary**: `#764ba2` - Вторичный фиолетовый
- **Background Gradient**: `linear-gradient(135deg, #667eea 0%, #764ba2 100%)`

#### Типографика
- **Основной шрифт**: Montserrat (Google Fonts)
- **Размеры**: H1: 32px (mobile: 24px), H2: 24px (mobile: 20px), основной текст: 16px

### Responsive Design
```css
/* Mobile First */
@media (min-width: 375px) { /* Mobile */ }
@media (min-width: 768px) { /* Tablet */ }
@media (min-width: 1024px) { /* Desktop */ }
@media (min-width: 1440px) { /* Large Desktop */ }
```

## 🧪 Тестирование

### Инструменты
- **Jest** + **React Testing Library** - Компонентные тесты
- **Chrome Lighthouse** - Производительность и доступность
- **axe DevTools** - Проверка доступности

### Требования к качеству
- HTML и CSS код семантически корректный
- Учет принципов доступности
- Тестирование с помощью Lighthouse и axe DevTools
- Mobile-first подход (основная ширина: 375px)

### Команды тестирования
```bash
# Все тесты
npm test

# С покрытием
npm test -- --coverage
```

## 📋 План разработки

### Этапы проекта

#### Этап 1: Предложение по дизайну 🔄
- [x] Описание UX и целевых групп
- [ ] Каркасные модели (wireframes) для мобильного приложения (375px)
- [ ] Каркасные модели для панели управления (1440px)
- [x] График основных этапов проекта
- [ ] Файл: `assets/wireframes/suunnitteluehdotus_tiiminimi.pdf`
- [x] Создана папка `assets/wireframes/` с инструкциями

#### Этап 2: Базовая структура ✅
- [x] React проект с TypeScript
- [x] Конфигурация REST API с axios
- [x] TypeScript типы и интерфейсы
- [x] Базовая документация
- [x] Система контроля версий (Git)

#### Этап 3: UI компоненты и страницы ✅
- [x] Глобальные стили с цветовой палитрой
- [x] Компоненты (Button, Header, Sidebar, Input, Table, Icon)
- [x] Страницы (Welcome, Login, SignUp, Dashboard, Activities, PersonalInfo)
- [x] React Router маршрутизация
- [x] CSS Modules для изоляции стилей
- [x] Адаптивная верстка (mobile-first)

#### Этап 4: Панель управления (Desktop First) 🔄
- [ ] Интеграция с Supabase Auth API
- [ ] AuthContext для управления сессией
- [ ] CRUD операции для активностей
- [ ] Управление пользователями (admin)
- [ ] Двухэтапное удаление
- [ ] Безопасное хранение паролей

#### Этап 5: Мобильное приложение (Mobile First) ⏳
- [ ] Нижняя навигация (3 страницы)
- [ ] Список активностей с карточками
- [ ] Поиск и фильтрация
- [ ] Детальная страница активности
- [ ] Infinite scroll
- [ ] Интеграция с OpenAPI

#### Этап 6: Тестирование и деплой ⏳
- [ ] Протокол тестирования мобильного интерфейса
- [ ] Lighthouse проверки
- [ ] Accessibility тестирование
- [ ] Деплой на Vercel/Netlify
- [ ] Ссылка на опубликованное приложение

### Текущий статус
**Дата начала**: Декабрь 2024  
**Последнее обновление**: 9 января 2025  
**Текущий этап**: Этап 3 завершается, подготовка к этапу 4 🔄

### Что готово
- ✅ Базовая архитектура и настройка
- ✅ Все UI компоненты и страницы  
- ✅ Маршрутизация и навигация
- ✅ Типизация TypeScript
- ✅ Адаптивные стили и дизайн-система
- ✅ Проект компилируется без ошибок
- ✅ Структура папок согласно требованиям

### Что требует завершения
- ❌ Wireframes (этап 1) - нужно создать файлы дизайна
- ❌ Интеграция с Supabase Auth API
- ❌ CRUD операции для активностей
- ❌ Мобильный интерфейс с нижней навигацией

### Следующие шаги
1. **Завершить этап 1**: Создать wireframes и PDF предложение  
2. **Начать этап 4**: Интеграция аутентификации с Supabase
3. Реализация CRUD операций для активностей
4. Мобильный интерфейс с API интеграцией

## 📚 Управление проектом

### Git workflow
- Информативные сообщения коммитов
- Хорошие практики разработки ПО
- Структурированный репозиторий с README.md

### Команда
Разработано для Hobbly Technologies Oy в рамках учебного проекта

---

**Статус**: Основная функциональность UI готова. Следующие шаги - интеграция с Supabase для аутентификации и данных, а также реализация мобильного интерфейса согласно требованиям проекта.